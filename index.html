<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RS3 Ultimate Helper - Enhanced Quest Log</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://runeapps.org/apps/alt1/alt1lib.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header with Username -->
        <div class="header">
            <div class="logo-section">
                <h1 class="title">RS3 Ultimate Helper</h1>
                <div class="version-badge">v3.0.0 Quest Log</div>
            </div>
            <div class="player-greeting" id="playerGreeting">
                <span class="greeting-label">Account:</span>
                <span class="player-name" id="playerName">Enter Username</span>
                <button class="refresh-name-btn" id="refreshName" title="Load/Refresh quest data">‚Üª</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="questlog">
                <span class="tab-icon">üìú</span>
                <span class="tab-label">Quest Log</span>
            </button>
            <button class="tab-btn" data-tab="progress">
                <span class="tab-icon">üìä</span>
                <span class="tab-label">Progress</span>
            </button>
            <button class="tab-btn" data-tab="settings">
                <span class="tab-icon">‚öô</span>
                <span class="tab-label">Settings</span>
            </button>
        </div>

        <!-- Quest Log Tab (Main View) -->
        <div class="tab-content active" id="questlog">
            <div class="section-header">Quest Log</div>
            
            <div class="info-box" style="margin-bottom: 15px;">
                <strong>üåê Live Quest Data:</strong> All quest information is pulled directly from your RS3 profile via RuneMetrics API.
                <br><strong>üéÆ Alt1 Integration:</strong> ${typeof alt1 !== 'undefined' ? '‚úì Enabled - Item detection active!' : '‚ö†Ô∏è Install Alt1 Toolkit for item detection'}
            </div>
            
            <div class="search-box">
                <input type="text" id="questSearch" placeholder="Search quests by name or difficulty..." />
                <button id="searchBtn" class="action-btn">Search</button>
            </div>
            
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All Quests</button>
                <button class="filter-btn" data-filter="available">Not Started</button>
                <button class="filter-btn" data-filter="started">In Progress</button>
                <button class="filter-btn" data-filter="completed">Completed</button>
            </div>

            <div class="quest-count" id="questCount">Loading quests...</div>

            <div id="questLog" class="quest-list">
                <div class="loading">
                    <p>üì° Loading quest data from your RS3 profile...</p>
                    <p>Please enter your RuneScape username above if you haven't already.</p>
                </div>
            </div>
        </div>

        <!-- Progress Tab -->
        <div class="tab-content" id="progress">
            <div class="section-header">Quest Progress</div>
            
            <!-- Real Stats from RS3 API -->
            <div class="info-box" style="margin-bottom: 20px;">
                <h3 style="color: #d4af37; margin-bottom: 10px;">üåê Your RS3 Profile Stats</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 15px;">
                    <div>
                        <strong style="color: #c9b896;">Total Level:</strong>
                        <span id="totalLevel" style="color: #d4af37; font-size: 1.2em; margin-left: 5px;">?</span>
                    </div>
                    <div>
                        <strong style="color: #c9b896;">Quests Complete:</strong>
                        <span id="questsCompleteFromAPI" style="color: #d4af37; font-size: 1.2em; margin-left: 5px;">?</span>
                    </div>
                    <div>
                        <strong style="color: #c9b896;">Quest Points:</strong>
                        <span id="questPointsFromAPI" style="color: #d4af37; font-size: 1.2em; margin-left: 5px;">?</span>
                    </div>
                </div>
                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #5a4428;">
                    <small style="color: #9a8a6a;">Last updated: <span id="statsLastUpdated">Never</span></small>
                </div>
            </div>
            
            <div class="progress-stats">
                <div class="stat-box quests-stat">
                    <div class="stat-icon">‚öî</div>
                    <div class="stat-content">
                        <div class="stat-label">Quests Complete</div>
                        <div class="stat-value" id="questProgress">0 / 268</div>
                    </div>
                </div>
                <div class="stat-box qp-stat">
                    <div class="stat-icon">‚òÖ</div>
                    <div class="stat-content">
                        <div class="stat-label">Quest Points</div>
                        <div class="stat-value" id="qpProgress">0 / 468</div>
                    </div>
                </div>
                <div class="stat-box completion-stat">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-content">
                        <div class="stat-label">Completion</div>
                        <div class="stat-value" id="completionPercent">0%</div>
                    </div>
                </div>
            </div>
            
            <div class="progress-bar-container">
                <div class="progress-bar-label">Quest Cape Progress</div>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="info-box" style="margin-top: 20px;">
                <h3 style="color: #d4af37;">üìä Statistics</h3>
                <p><strong>No Local Tracking:</strong> All data is pulled directly from your RS3 profile in real-time.</p>
                <p><strong>Always Accurate:</strong> Your progress updates automatically when you refresh.</p>
                <p><strong>Multi-Device:</strong> Access your quests from anywhere - no sync needed!</p>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" id="settings">
            <div class="section-header">Settings</div>
            
            <div class="settings-group">
                <div class="settings-group-title">üéÆ Alt1 Toolkit Integration</div>
                
                <div class="info-box">
                    <p><strong>Current Status:</strong> ${typeof alt1 !== 'undefined' ? '‚úÖ Alt1 Detected' : '‚ùå Alt1 Not Detected'}</p>
                    ${typeof alt1 === 'undefined' ? `
                        <p style="margin-top: 10px;"><strong>Install Alt1 for:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>‚úì Automatic inventory item detection</li>
                            <li>‚úì Real-time quest requirement checking</li>
                            <li>‚úì In-game overlay support</li>
                        </ul>
                        <p style="margin-top: 10px;">
                            <a href="https://runeapps.org/alt1" target="_blank" style="color: #d4af37;">Download Alt1 Toolkit ‚Üí</a>
                        </p>
                    ` : `
                        <p style="margin-top: 10px; color: #4a7c59;">
                            ‚úÖ Alt1 features are active! Click "Show Details" on any quest to check your inventory.
                        </p>
                    `}
                </div>
            </div>

            <div class="settings-group">
                <div class="settings-group-title">üåê Data Source</div>
                
                <div class="info-box">
                    <p><strong>Quest Data:</strong> RuneMetrics API (Official Jagex API)</p>
                    <p><strong>Updates:</strong> Real-time when you refresh</p>
                    <p><strong>Accuracy:</strong> 100% accurate to your RS3 account</p>
                    <p><strong>Storage:</strong> No local tracking - always synced</p>
                </div>
            </div>

            <div class="settings-group">
                <div class="settings-group-title">üìö Resources</div>
                <div class="info-box">
                    <p><strong>Wiki Integration:</strong> Every quest links to the official RS Wiki quick guide</p>
                    <p><strong>Teleport Guide:</strong> Shows teleport methods for each quest location</p>
                    <p><strong>Item Detection:</strong> Alt1 checks your inventory for required items</p>
                    <p><strong>Inline Guides:</strong> View quest guides directly in the app</p>
                </div>
            </div>

            <div class="settings-group">
                <div class="settings-group-title">Account Information</div>
                <div class="info-box">
                    <div><strong>Current Account:</strong> <span id="settingsPlayerName">Not loaded</span></div>
                    <div><strong>Data Source:</strong> RuneMetrics API + Wiki</div>
                    <div><strong>Profile Privacy:</strong> Must be public for API access</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-links">
                <a href="https://runescape.wiki" target="_blank">RuneScape Wiki</a>
                <span class="separator">|</span>
                <a href="https://apps.runescape.com/runemetrics/" target="_blank">RuneMetrics</a>
                <span class="separator">|</span>
                <a href="https://runeapps.org/alt1" target="_blank">Alt1 Toolkit</a>
                <span class="separator">|</span>
                <a href="https://github.com/deadlyhour123/rs3-ultimate-helper" target="_blank">GitHub</a>
            </div>
            <div class="footer-credit">RS3 Ultimate Helper v3.0 | Live Quest Log with Alt1 Integration</div>
        </div>
    </div>

    <!-- Load JavaScript files -->
    <script src="js/quests.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/app-enhanced.js"></script>
</body>
</html>
