<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RS3 Ultimate Helper</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://runeapps.org/apps/alt1/alt1lib.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header with Username -->
        <div class="header">
            <div class="logo-section">
                <h1 class="title">RS3 Ultimate Helper</h1>
                <div class="version-badge">v2.2.0 Enhanced</div>
            </div>
            <div class="player-greeting" id="playerGreeting">
                <span class="greeting-label">Account:</span>
                <span class="player-name" id="playerName">Detecting...</span>
                <button class="refresh-name-btn" id="refreshName" title="Refresh username">‚Üª</button>
                <button class="refresh-name-btn" id="manualStats" title="Enter stats manually" style="margin-left: 5px;">‚úèÔ∏è</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="quests">
                <span class="tab-icon">‚öî</span>
                <span class="tab-label">Quests</span>
            </button>
            <button class="tab-btn" data-tab="tracker">
                <span class="tab-icon">üìä</span>
                <span class="tab-label">Progress</span>
            </button>
            <button class="tab-btn" data-tab="pathfinder">
                <span class="tab-icon">üó∫</span>
                <span class="tab-label">Pathfinder</span>
            </button>
            <button class="tab-btn" data-tab="settings">
                <span class="tab-icon">‚öô</span>
                <span class="tab-label">Settings</span>
            </button>
        </div>

        <!-- Quest Tab -->
        <div class="tab-content active" id="quests">
            <div class="section-header">Quest Log</div>
            
            <div class="search-box">
                <input type="text" id="questSearch" placeholder="Search quests by name, location, or description..." />
                <button id="searchBtn" class="action-btn">Search</button>
            </div>
            
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All Quests</button>
                <button class="filter-btn" data-filter="available">Available</button>
                <button class="filter-btn" data-filter="completed">Completed</button>
            </div>

            <div class="quest-count" id="questCount">Showing 20 quests</div>

            <div id="questList" class="quest-list">
                <!-- Quests will be loaded here -->
            </div>
        </div>

        <!-- Tracker Tab -->
        <div class="tab-content" id="tracker">
            <div class="section-header">Progress Tracker</div>
            
            <!-- Real Stats from RS3 API -->
            <div class="info-box" style="margin-bottom: 20px;">
                <h3 style="color: #d4af37; margin-bottom: 10px;">üåê Your RS3 Profile Stats</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 15px;">
                    <div>
                        <strong style="color: #c9b896;">Total Level:</strong>
                        <span id="totalLevel" style="color: #d4af37; font-size: 1.2em; margin-left: 5px;">?</span>
                    </div>
                    <div>
                        <strong style="color: #c9b896;">Quests Complete:</strong>
                        <span id="questsCompleteFromAPI" style="color: #d4af37; font-size: 1.2em; margin-left: 5px;">?</span>
                    </div>
                    <div>
                        <strong style="color: #c9b896;">Quest Points:</strong>
                        <span id="questPointsFromAPI" style="color: #d4af37; font-size: 1.2em; margin-left: 5px;">?</span>
                    </div>
                </div>
                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #5a4428;">
                    <small style="color: #9a8a6a;">Last updated: <span id="statsLastUpdated">Never</span></small>
                </div>
            </div>
            
            <!-- Local Progress Tracking -->
            <div style="margin-bottom: 15px;">
                <h3 style="color: #c9b896; font-size: 1.1em;">üìã Local Quest Tracking</h3>
                <p style="color: #9a8a6a; font-size: 0.9em;">Quests you've marked complete in this app:</p>
            </div>
            
            <div class="progress-stats">
                <div class="stat-box quests-stat">
                    <div class="stat-icon">‚öî</div>
                    <div class="stat-content">
                        <div class="stat-label">Quests Marked</div>
                        <div class="stat-value" id="questProgress">0 / 268</div>
                    </div>
                </div>
                <div class="stat-box qp-stat">
                    <div class="stat-icon">‚òÖ</div>
                    <div class="stat-content">
                        <div class="stat-label">Quest Points Tracked</div>
                        <div class="stat-value" id="qpProgress">0 / 468</div>
                    </div>
                </div>
                <div class="stat-box completion-stat">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-content">
                        <div class="stat-label">Completion</div>
                        <div class="stat-value" id="completionPercent">0%</div>
                    </div>
                </div>
            </div>
            
            <div class="progress-bar-container">
                <div class="progress-bar-label">Overall Progress</div>
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="action-buttons">
                <button id="syncProgress" class="btn-primary">Sync with Game</button>
                <button id="syncQuestsFromAPI" class="btn-success" style="display: none;">‚úì Manual Sync from RS3 Profile</button>
                <button id="viewQuestList" class="btn-secondary" style="display: none;">View All Quests from Profile</button>
                <button id="resetProgress" class="btn-danger">Reset All Progress</button>
            </div>
            
            <!-- Quest List from API (hidden by default) -->
            <div id="apiQuestList" style="display: none; margin-top: 20px;">
                <div class="section-header">Your RS3 Quests</div>
                <div class="info-box">
                    <p>This is your actual quest list from RuneScape. Auto-sync will automatically mark these as complete, or click "Manual Sync" above.</p>
                </div>
                <div id="apiQuestListContent" style="max-height: 400px; overflow-y: auto;"></div>
            </div>
        </div>

        <!-- Pathfinder Tab -->
        <div class="tab-content" id="pathfinder">
            <div class="section-header">Quest Pathfinder</div>
            <div class="section-description">
                Find the optimal quest order based on your stats and current progress.
            </div>
            
            <div class="info-box" style="margin-bottom: 20px;">
                <h3 style="color: #d4af37;">üéØ Smart Quest Recommendations</h3>
                <p>Inspired by Project Tenacity, this pathfinder will help you find the most efficient quest order!</p>
                <p style="margin-top: 10px;"><strong>Features coming soon:</strong></p>
                <ul>
                    <li>Analyze quest requirements and dependencies</li>
                    <li>Recommend optimal completion order</li>
                    <li>Consider your current stats and completed quests</li>
                    <li>Show quest chains and series progression</li>
                    <li>Filter by difficulty and length</li>
                </ul>
            </div>
            
            <div class="input-group">
                <label class="input-label">Your Current Stats:</label>
                <button id="detectStats" class="btn-secondary">Detect from Game</button>
            </div>

            <div id="recommendedQuests" class="recommended-list">
                <div class="info-box">
                    <p>The pathfinder will suggest which quests you should complete next based on:</p>
                    <ul>
                        <li>Your current skill levels</li>
                        <li>Previously completed quests</li>
                        <li>Quest requirements and chains</li>
                        <li>Optimal progression path</li>
                    </ul>
                    <p class="note">Use "Detect from Game" to automatically read your stats from RuneScape.</p>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" id="settings">
            <div class="section-header">Settings</div>
            
            <div class="settings-group">
                <div class="settings-group-title">üîÑ Quest Syncing</div>
                
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="autoSyncQuests" checked>
                        <span class="setting-text">Auto-sync completed quests from RS3 profile</span>
                    </label>
                    <small style="color: #9a8a6a; margin-left: 30px; display: block; margin-top: 5px;">
                        Automatically marks quests complete when fetching your RS3 stats
                    </small>
                </div>
            </div>
            
            <div class="settings-group">
                <div class="settings-group-title">Display Options</div>
                
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="showOverlay" checked>
                        <span class="setting-text">Show in-game overlay</span>
                    </label>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="autoDetect" checked>
                        <span class="setting-text">Auto-detect quest completion</span>
                    </label>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="notifications" checked>
                        <span class="setting-text">Enable notifications</span>
                    </label>
                </div>

                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="showDifficulty" checked>
                        <span class="setting-text">Show difficulty badges</span>
                    </label>
                </div>
            </div>

            <div class="settings-group">
                <div class="settings-group-title">Data Management</div>
                
                <div class="action-buttons">
                    <button id="exportData" class="btn-secondary">Export Progress Data</button>
                    <button id="importData" class="btn-secondary">Import Progress Data</button>
                </div>
            </div>

            <div class="settings-group">
                <div class="settings-group-title">Account Information</div>
                <div class="info-box">
                    <div><strong>Current Account:</strong> <span id="settingsPlayerName">Not detected</span></div>
                    <div><strong>Progress Saved:</strong> <span id="lastSaved">Never</span></div>
                    <div><strong>Total Quest Points Available:</strong> 468</div>
                    <div><strong>Wiki Integration:</strong> ‚úì Quick guides linked for all quests</div>
                    <div><strong>Auto-Sync:</strong> <span id="autoSyncStatus">Enabled</span></div>
                </div>
            </div>
            
            <div class="settings-group">
                <div class="settings-group-title">üìö Resources</div>
                <div class="info-box">
                    <p><strong>Wiki Links:</strong> Every quest now has a "üìñ Wiki" button that links to the quick guide on RuneScape Wiki.</p>
                    <p style="margin-top: 10px;"><strong>Quest Locations:</strong> All quests now show their starting location for easy reference.</p>
                    <p style="margin-top: 10px;"><strong>Inspired by:</strong> This enhanced version takes inspiration from Project Tenacity's account pathing system.</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-links">
                <a href="https://runescape.wiki" target="_blank">RuneScape Wiki</a>
                <span class="separator">|</span>
                <a href="https://github.com/deadlyhour123/rs3-ultimate-helper" target="_blank">GitHub</a>
                <span class="separator">|</span>
                <a href="quest-editor.html" target="_blank">Quest Editor</a>
            </div>
            <div class="footer-credit">Created for the RS3 Community | Enhanced with Wiki Integration</div>
        </div>
    </div>

    <!-- Load JavaScript files -->
    <script src="js/quests.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
